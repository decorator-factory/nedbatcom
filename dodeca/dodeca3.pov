// Third stellation of the dodecahedron.
// originally generated by pypolys, but hand-edited.
// Ned Batchelder.

#declare Shadow=1;
#declare Mask=1;
#declare Star=1;

global_settings { assumed_gamma 2.2 }

#include "colors.inc"

camera {
    location  <-1, -.45,-2.3>
    direction <0, 0,  1>
    up        <0, 1,  0>
    right     <1, 0,  0>
    look_at   <0, 0,  0>
}

light_source {
    <-4, 6, -6> 
    color White
    area_light <1, 0, 0>, <0, 0, 1>, 8,8
    adaptive 1
    jitter
}

sky_sphere { 
    pigment { 
        #if (Mask)
        Black
        #else
        #if (Star)
        Black
        #else
        White
        #end 
        #end
    }
}

// Floor
plane { <0, 1, 0>, -1
    pigment { 
        #if (Mask)
        Black
        #else
        White
        #end 
    }
    finish {
        ambient 1.1     // Lighten the shadow. 
        diffuse 1 
        brilliance 0    // No fade-off or horizon.
    }
    #if (Star)
    no_image
    #end
}

global_settings {
    ambient_light 0.3
    radiosity {
        brightness 0.3
        recursion_limit 5
        count 200
        error_bound 0.1
        //distance_maximum 10
        //low_error_factor 0.5
        nearest_count 10
        minimum_reuse 0.005
    }
}

#declare tex =
texture {
    #if (Mask)
    pigment { color White }
    finish { ambient 10 diffuse 0 brilliance 0 } 
    #else
    pigment { color White *.95 }
    finish { ambient .3 diffuse .7 } 
    #end
}

// The Star

object {
    union {
        polygon{ 6,
            <-0.57735026919, -0.57735026919, -0.57735026919>, 
            <0.934172358963, 0.356822089773, 0.0>, 
            <-0.934172358963, 0.356822089773, 0.0>, 
            <0.57735026919, -0.57735026919, -0.57735026919>, 
            <0.0, 0.934172358963, 0.356822089773>, 
            <-0.57735026919, -0.57735026919, -0.57735026919>
        }
        polygon{ 6,
            <0.356822089773, 0.0, -0.934172358963>, 
            <0.356822089773, 0.0, 0.934172358963>, 
            <-0.57735026919, 0.57735026919, -0.57735026919>, <0.934172358963, -0.356822089773, 0.0>, <-0.57735026919, 0.57735026919, 0.57735026919>, <0.356822089773, 0.0, -0.934172358963>
        }
        polygon{ 6,
            <0.57735026919, -0.57735026919, 0.57735026919>, <-0.934172358963, 0.356822089773, 0.0>, <0.934172358963, 0.356822089773, 0.0>, <-0.57735026919, -0.57735026919, 0.57735026919>, <0.0, 0.934172358963, -0.356822089773>, <0.57735026919, -0.57735026919, 0.57735026919>
        }
        polygon{ 6,
            <0.356822089773, 0.0, 0.934172358963>, <-0.57735026919, -0.57735026919, -0.57735026919>, <0.0, 0.934172358963, 0.356822089773>, <0.0, -0.934172358963, 0.356822089773>, <-0.57735026919, 0.57735026919, -0.57735026919>, <0.356822089773, 0.0, 0.934172358963>
        }
        polygon{ 6,
            <0.356822089773, 0.0, -0.934172358963>, <-0.57735026919, 0.57735026919, 0.57735026919>, <0.0, -0.934172358963, -0.356822089773>, <0.0, 0.934172358963, -0.356822089773>, <-0.57735026919, -0.57735026919, 0.57735026919>, <0.356822089773, 0.0, -0.934172358963>
        }
        polygon{ 6,
            <0.57735026919, 0.57735026919, -0.57735026919>, <-0.356822089773, 0.0, 0.934172358963>, <-0.356822089773, 0.0, -0.934172358963>, <0.57735026919, 0.57735026919, 0.57735026919>, <-0.934172358963, -0.356822089773, 0.0>, <0.57735026919, 0.57735026919, -0.57735026919>
        }
        polygon{ 6,
            <-0.57735026919, 0.57735026919, -0.57735026919>, <0.0, -0.934172358963, 0.356822089773>, <0.57735026919, 0.57735026919, -0.57735026919>, <-0.934172358963, -0.356822089773, 0.0>, <0.934172358963, -0.356822089773, 0.0>, <-0.57735026919, 0.57735026919, -0.57735026919>
        }
        polygon{ 6,
            <-0.356822089773, 0.0, -0.934172358963>, <0.57735026919, -0.57735026919, 0.57735026919>, <0.0, 0.934172358963, -0.356822089773>, <0.0, -0.934172358963, -0.356822089773>, <0.57735026919, 0.57735026919, 0.57735026919>, <-0.356822089773, 0.0, -0.934172358963>
        }
        polygon{ 6,
            <0.57735026919, -0.57735026919, -0.57735026919>, <-0.356822089773, 0.0, 0.934172358963>, <0.57735026919, 0.57735026919, -0.57735026919>, <0.0, -0.934172358963, 0.356822089773>, <0.0, 0.934172358963, 0.356822089773>, <0.57735026919, -0.57735026919, -0.57735026919>
        }
        polygon{ 6,
            <0.57735026919, 0.57735026919, 0.57735026919>, <0.0, -0.934172358963, -0.356822089773>, <-0.57735026919, 0.57735026919, 0.57735026919>, <0.934172358963, -0.356822089773, 0.0>, <-0.934172358963, -0.356822089773, 0.0>, <0.57735026919, 0.57735026919, 0.57735026919>
        }
        polygon{ 6,
            <-0.356822089773, 0.0, 0.934172358963>, <0.57735026919, -0.57735026919, -0.57735026919>, <-0.934172358963, 0.356822089773, 0.0>, <0.57735026919, -0.57735026919, 0.57735026919>, <-0.356822089773, 0.0, -0.934172358963>, <-0.356822089773, 0.0, 0.934172358963>
        }
        polygon{ 6,
            <-0.57735026919, -0.57735026919, 0.57735026919>, <0.934172358963, 0.356822089773, 0.0>, <-0.57735026919, -0.57735026919, -0.57735026919>, <0.356822089773, 0.0, 0.934172358963>, <0.356822089773, 0.0, -0.934172358963>, <-0.57735026919, -0.57735026919, 0.57735026919>
        }
    }
    texture { tex }

    rotate <0,0,clock*180> 
    #if (Mask)
    no_shadow
    #end
    #if (Shadow)
    no_image
    #end
}

